<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>数据库基础SQL | Hexo</title>
  <meta name="description" content="SQL（Structured Query Language）SQL即结构化查询语言，是关系数据库的标准语言 SQL 的动词    SQL功能 动词     数据查询 Select   数据定义 Create,Drop,Alter   数据操纵 Insert, Update, Delete   数据控制 Grant, Revoke     SQL 的数据定义语句    操作对象 创建 删除 修改">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库基础SQL">
<meta property="og:url" content="http://szdf123.github.io/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/index.html">
<meta property="og:site_name" content="本杰明学习笔记">
<meta property="og:description" content="SQL（Structured Query Language）SQL即结构化查询语言，是关系数据库的标准语言 SQL 的动词    SQL功能 动词     数据查询 Select   数据定义 Create,Drop,Alter   数据操纵 Insert, Update, Delete   数据控制 Grant, Revoke     SQL 的数据定义语句    操作对象 创建 删除 修改">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-28T17:06:01.000Z">
<meta property="article:modified_time" content="2021-09-01T13:34:49.873Z">
<meta property="article:author" content="Benjamin">
<meta property="article:tag" content="COMP9311">
<meta property="article:tag" content="手册">
<meta property="article:tag" content="持续更新">
<meta property="article:tag" content="课程笔记">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://szdf123.github.io/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/index.html">
  
    <link rel="alternate" href="/atom.xml" title="本杰明学习笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="../favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


<body class="main-center theme-purple" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://szdf123.github.io/" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">本杰明</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Programmer &amp; Product Manager</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 北京, 中国</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/szdf123" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>学习技术，热爱生活</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/UNSW/">UNSW</a><span class="category-list-count">42</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">实用工具</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">最佳实践</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E7%BA%AA%E5%AE%9E/">生活纪实</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">课程笔记</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9020/" rel="tag">COMP9020</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9021/" rel="tag">COMP9021</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9024/" rel="tag">COMP9024</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9311/" rel="tag">COMP9311</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9331/" rel="tag">COMP9331</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9414/" rel="tag">COMP9414</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9444/" rel="tag">COMP9444</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COMP9517/" rel="tag">COMP9517</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GSOE9210/" rel="tag">GSOE9210</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/" rel="tag">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/" rel="tag">MacOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/" rel="tag">Zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E9%93%BE%E8%B7%AF%E7%9B%91%E6%8E%A7/" rel="tag">全链路监控</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5%E6%93%8D%E4%BD%9C/" rel="tag">实践操作</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%B2%E5%AE%8C%E7%A8%BF/" rel="tag">已完稿</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%8B%E5%86%8C/" rel="tag">手册</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/" rel="tag">持续更新</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%99%E7%A8%8B/" rel="tag">教程</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E6%88%8F/" rel="tag">游戏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%B4%A2/" rel="tag">理财</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB/" rel="tag">生活</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7%E6%8A%80%E6%9C%AF/" rel="tag">监控技术</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" rel="tag">离散数学</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%BE%91%E4%B8%AD/" rel="tag">编辑中</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" rel="tag">计算机视觉</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" rel="tag">课程笔记</a><span class="tag-list-count">33</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/C/" style="font-size: 13px;">C</a> <a href="/tags/COMP9020/" style="font-size: 13.58px;">COMP9020</a> <a href="/tags/COMP9021/" style="font-size: 13px;">COMP9021</a> <a href="/tags/COMP9024/" style="font-size: 13.25px;">COMP9024</a> <a href="/tags/COMP9311/" style="font-size: 13.83px;">COMP9311</a> <a href="/tags/COMP9331/" style="font-size: 13px;">COMP9331</a> <a href="/tags/COMP9414/" style="font-size: 13px;">COMP9414</a> <a href="/tags/COMP9444/" style="font-size: 13.25px;">COMP9444</a> <a href="/tags/COMP9517/" style="font-size: 13.25px;">COMP9517</a> <a href="/tags/CentOS/" style="font-size: 13.17px;">CentOS</a> <a href="/tags/GSOE9210/" style="font-size: 13.25px;">GSOE9210</a> <a href="/tags/Hexo/" style="font-size: 13.08px;">Hexo</a> <a href="/tags/Java/" style="font-size: 13.08px;">Java</a> <a href="/tags/Linux/" style="font-size: 13.25px;">Linux</a> <a href="/tags/Mac/" style="font-size: 13px;">Mac</a> <a href="/tags/MacOS/" style="font-size: 13.08px;">MacOS</a> <a href="/tags/Maven/" style="font-size: 13px;">Maven</a> <a href="/tags/MySQL/" style="font-size: 13px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 13px;">Nginx</a> <a href="/tags/OpenCV/" style="font-size: 13px;">OpenCV</a> <a href="/tags/Python/" style="font-size: 13.33px;">Python</a> <a href="/tags/SQL/" style="font-size: 13.42px;">SQL</a> <a href="/tags/Windows/" style="font-size: 13px;">Windows</a> <a href="/tags/Zookeeper/" style="font-size: 13px;">Zookeeper</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 13px;">人工智能</a> <a href="/tags/%E5%85%A8%E9%93%BE%E8%B7%AF%E7%9B%91%E6%8E%A7/" style="font-size: 13px;">全链路监控</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 13px;">图像处理</a> <a href="/tags/%E5%AE%9E%E8%B7%B5%E6%93%8D%E4%BD%9C/" style="font-size: 13.33px;">实践操作</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 13.25px;">工具</a> <a href="/tags/%E5%B7%B2%E5%AE%8C%E7%A8%BF/" style="font-size: 13.92px;">已完稿</a> <a href="/tags/%E6%89%8B%E5%86%8C/" style="font-size: 13.42px;">手册</a> <a href="/tags/%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/" style="font-size: 13.67px;">持续更新</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 13.08px;">教程</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 13.75px;">数据库</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 13px;">游戏</a> <a href="/tags/%E7%90%86%E8%B4%A2/" style="font-size: 13.08px;">理财</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 13px;">生活</a> <a href="/tags/%E7%9B%91%E6%8E%A7%E6%8A%80%E6%9C%AF/" style="font-size: 13.33px;">监控技术</a> <a href="/tags/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/" style="font-size: 13.5px;">离散数学</a> <a href="/tags/%E7%BC%96%E8%BE%91%E4%B8%AD/" style="font-size: 13.5px;">编辑中</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 13px;">英语</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/" style="font-size: 13.25px;">计算机视觉</a> <a href="/tags/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" style="font-size: 14px;">课程笔记</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/2021/10/14/ji-zhu-xue-xi/ai/numpy-shi-yong-shou-ce/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/14/ji-zhu-xue-xi/ai/numpy-shi-yong-shou-ce/" class="title">numpy使用手册</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-14T12:12:30.000Z" itemprop="datePublished">2021-10-14</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/10/14/unsw/comp9444/shen-jing-wang-luo-yu-shen-du-xue-xi-3/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/UNSW/">UNSW</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/14/unsw/comp9444/shen-jing-wang-luo-yu-shen-du-xue-xi-3/" class="title">神经网络与深度学习（3）</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-14T11:33:46.000Z" itemprop="datePublished">2021-10-14</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/10/11/ji-zhu-xue-xi/jian-kong-xi-tong/quan-lian-lu-jian-kong/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/11/ji-zhu-xue-xi/jian-kong-xi-tong/quan-lian-lu-jian-kong/" class="title">全链路监控</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-11T09:21:25.000Z" itemprop="datePublished">2021-10-11</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/10/09/unsw/comp9517/ji-suan-ji-shi-jue-ke-cheng-bi-ji-4/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/UNSW/">UNSW</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/09/unsw/comp9517/ji-suan-ji-shi-jue-ke-cheng-bi-ji-4/" class="title">计算机视觉课程笔记（4）</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-09T02:50:26.000Z" itemprop="datePublished">2021-10-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/10/09/unsw/comp9517/ji-suan-ji-shi-jue-ke-cheng-bi-ji-3/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/UNSW/">UNSW</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/09/unsw/comp9517/ji-suan-ji-shi-jue-ke-cheng-bi-ji-3/" class="title">计算机视觉课程笔记（3）</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-09T02:42:50.000Z" itemprop="datePublished">2021-10-09</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-UNSW/COMP9311/数据库基础SQL" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      数据库基础SQL
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/" class="article-date">
	  <time datetime="2021-02-28T17:06:01.000Z" itemprop="datePublished">2021-03-01</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/UNSW/">UNSW</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/COMP9311/" rel="tag">COMP9311</a>, <a class="article-tag-link-link" href="/tags/SQL/" rel="tag">SQL</a>, <a class="article-tag-link-link" href="/tags/%E6%89%8B%E5%86%8C/" rel="tag">手册</a>, <a class="article-tag-link-link" href="/tags/%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/" rel="tag">持续更新</a>, <a class="article-tag-link-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a>, <a class="article-tag-link-link" href="/tags/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" rel="tag">课程笔记</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 4.2k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 19(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="SQL（Structured-Query-Language）"><a href="#SQL（Structured-Query-Language）" class="headerlink" title="SQL（Structured Query Language）"></a>SQL（Structured Query Language）</h2><p>SQL即结构化查询语言，是关系数据库的标准语言</p>
<h4 id="SQL-的动词"><a href="#SQL-的动词" class="headerlink" title="SQL 的动词"></a>SQL 的动词</h4><div class="table-container">
<table>
<thead>
<tr>
<th>SQL功能</th>
<th>动词</th>
</tr>
</thead>
<tbody>
<tr>
<td>数据查询</td>
<td>Select</td>
</tr>
<tr>
<td>数据定义</td>
<td>Create,Drop,Alter</td>
</tr>
<tr>
<td>数据操纵</td>
<td>Insert, Update, Delete</td>
</tr>
<tr>
<td>数据控制</td>
<td>Grant, Revoke</td>
</tr>
</tbody>
</table>
</div>
<h4 id="SQL-的数据定义语句"><a href="#SQL-的数据定义语句" class="headerlink" title="SQL 的数据定义语句"></a>SQL 的数据定义语句</h4><div class="table-container">
<table>
<thead>
<tr>
<th>操作对象</th>
<th>创建</th>
<th>删除</th>
<th>修改</th>
</tr>
</thead>
<tbody>
<tr>
<td>模式</td>
<td>Create Schema</td>
<td>Drop Schema</td>
<td></td>
</tr>
<tr>
<td>表</td>
<td>Create Table</td>
<td>Drop Table</td>
<td>Alter Table</td>
</tr>
<tr>
<td>视图</td>
<td>Create View</td>
<td>Drop View</td>
<td></td>
</tr>
<tr>
<td>索引</td>
<td>Create Index</td>
<td>Drop Index</td>
<td>Alter Index</td>
</tr>
</tbody>
</table>
</div>
<h3 id="定义模式"><a href="#定义模式" class="headerlink" title="定义模式"></a>定义模式</h3><p><strong>CREATE SCHEMA</strong> [&lt;模式名&gt;] <strong>AUTHORIZATION</strong> &lt;用户名&gt;[&lt;表定义子句&gt;|&lt;视图定义子句&gt;|&lt;授权定义子句&gt;]</p>
<p>CREATE SCHEMA “S-T” AUTHORIZATION WANG;</p>
<p>其中，模式名可隐藏，默认为&lt;用户名&gt;</p>
<h2 id="本案例使用的数据"><a href="#本案例使用的数据" class="headerlink" title="本案例使用的数据"></a>本案例使用的数据</h2><p>本教程使用如下数据库表：</p>
<p>Beers( <em><u>name</u></em>, manf ), Bars( <em><u>name</u></em>, addr, license )<br>Drinkers( <em><u>name</u></em>, addr, phone ), Likes( <em><u>drinker, beer</u></em> )<br>Sells( <u>bar, beer</u>, price ), Frequents( <u><em>drinker, bar</em></u> )</p>
<p>其中，斜体加下划线内容为主键</p>
<p>Bars：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>Addr</th>
<th>License</th>
</tr>
</thead>
<tbody>
<tr>
<td>Australia Hotel</td>
<td>The Rocks</td>
<td>123456</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Coogee</td>
<td>966500</td>
</tr>
<tr>
<td>Lord Nelson</td>
<td>The Rocks</td>
<td>123888</td>
</tr>
<tr>
<td>Marble Bar</td>
<td>Sydney</td>
<td>122123</td>
</tr>
<tr>
<td>Regent Hotel</td>
<td>Kingsford</td>
<td>987654</td>
</tr>
<tr>
<td>Royal Hotel</td>
<td>Randwick</td>
<td>938500</td>
</tr>
</tbody>
</table>
</div>
<p>Drinkers：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>Addr</th>
<th>Phone</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
<td>Randwick</td>
<td>9385-4444</td>
</tr>
<tr>
<td>Gernot</td>
<td>Newtown</td>
<td>9415-3378</td>
</tr>
<tr>
<td>John</td>
<td>Clovelly</td>
<td>9665-1234</td>
</tr>
<tr>
<td>Justin</td>
<td>Mosman</td>
<td>9845-4321</td>
</tr>
</tbody>
</table>
</div>
<p>Beers：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>Manf</th>
</tr>
</thead>
<tbody>
<tr>
<td>80/-</td>
<td>Caledonian</td>
</tr>
<tr>
<td>Bigfoot Barley Wine</td>
<td>Sierra Nevada</td>
</tr>
<tr>
<td>Burragorang Bock</td>
<td>George IV Inn</td>
</tr>
<tr>
<td>Crown Lager</td>
<td>Carlton</td>
</tr>
<tr>
<td>Fosters Lager</td>
<td>Carlton</td>
</tr>
<tr>
<td>Invalid Stout</td>
<td>Carlton</td>
</tr>
<tr>
<td>Melbourne Bitter</td>
<td>Carlton</td>
</tr>
<tr>
<td>New</td>
<td>Toohey’s</td>
</tr>
<tr>
<td>Old</td>
<td>Toohey’s</td>
</tr>
<tr>
<td>Old Admiral</td>
<td>Lord Nelson</td>
</tr>
<tr>
<td>Pale Ale</td>
<td>Sierra Nevada</td>
</tr>
<tr>
<td>Premium Lager</td>
<td>Cascade</td>
</tr>
<tr>
<td>Red</td>
<td>Toohey’s</td>
</tr>
<tr>
<td>Sheaf Stout</td>
<td>Toohey’s</td>
</tr>
<tr>
<td>Sparkling Ale</td>
<td>Cooper’s</td>
</tr>
<tr>
<td>Stout</td>
<td>Cooper’s</td>
</tr>
<tr>
<td>Three Sheets</td>
<td>Lord Nelson</td>
</tr>
<tr>
<td>Victoria Bitter</td>
<td>Carlton</td>
</tr>
</tbody>
</table>
</div>
<p>Frequents：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Drinker</th>
<th>Bar</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
<td>Coogee Bay Hotel</td>
</tr>
<tr>
<td>Gernot</td>
<td>Lord Nelson</td>
</tr>
<tr>
<td>John</td>
<td>Coogee Bay Hotel</td>
</tr>
<tr>
<td>John</td>
<td>Lord Nelson</td>
</tr>
<tr>
<td>John</td>
<td>Australia Hotel</td>
</tr>
<tr>
<td>Justin</td>
<td>Regent Hotel</td>
</tr>
<tr>
<td>Justin</td>
<td>Marble Bar</td>
</tr>
</tbody>
</table>
</div>
<p>Likes:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Drinker</th>
<th>Beer</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
<td>Crown Lager</td>
</tr>
<tr>
<td>Adam</td>
<td>Fosters Lager</td>
</tr>
<tr>
<td>Adam</td>
<td>New</td>
</tr>
<tr>
<td>Gernot</td>
<td>Premium Lager</td>
</tr>
<tr>
<td>Gernot</td>
<td>Sparkling Ale</td>
</tr>
<tr>
<td>John</td>
<td>80/-</td>
</tr>
<tr>
<td>John</td>
<td>Bigfoot Barley Wine</td>
</tr>
<tr>
<td>John</td>
<td>Pale Ale</td>
</tr>
<tr>
<td>John</td>
<td>Three Sheets</td>
</tr>
<tr>
<td>Justin</td>
<td>Sparkling Ale</td>
</tr>
<tr>
<td>Justin</td>
<td>Victoria Bitter</td>
</tr>
</tbody>
</table>
</div>
<p>Sells:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Bar</th>
<th>Beer</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>Australia Hotel</td>
<td>Burragorang Bock</td>
<td>3.5</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>New</td>
<td>2.25</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Old</td>
<td>2.5</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Sparkling Ale</td>
<td>2.8</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Victoria Bitter</td>
<td>2.3</td>
</tr>
<tr>
<td>Lord Nelson</td>
<td>Three Sheets</td>
<td>3.75</td>
</tr>
<tr>
<td>Lord Nelson</td>
<td>Old Admiral</td>
<td>3.75</td>
</tr>
<tr>
<td>Marble Bar</td>
<td>New</td>
<td>2.8</td>
</tr>
<tr>
<td>Marble Bar</td>
<td>Old</td>
<td>2.8</td>
</tr>
<tr>
<td>Marble Bar</td>
<td>Victoria Bitter</td>
<td>2.8</td>
</tr>
<tr>
<td>Regent Hotel</td>
<td>New</td>
<td>2.2</td>
</tr>
<tr>
<td>Regent Hotel</td>
<td>Victoria Bitter</td>
<td>2.2</td>
</tr>
<tr>
<td>Royal Hotel</td>
<td>New</td>
<td>2.3</td>
</tr>
<tr>
<td>Royal Hotel</td>
<td>Old</td>
<td>2.3</td>
</tr>
<tr>
<td>Royal Hotel</td>
<td>Victoria Bitter</td>
<td>2.3</td>
</tr>
</tbody>
</table>
</div>
<h2 id="SQL语法及样例"><a href="#SQL语法及样例" class="headerlink" title="SQL语法及样例"></a>SQL语法及样例</h2><h3 id="SQL-SELECT"><a href="#SQL-SELECT" class="headerlink" title="SQL SELECT"></a>SQL SELECT</h3><p><strong>语法：</strong>π<sub>{attributes}</sub>(σ<sub>Condition</sub>(Relations))</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT attributes
FROM relations
WHERE condition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>例：</strong>哪个啤酒是Toohey制造的？</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 指定where语句查询条件的方法
SELECT Name FROM Beers WHERE Manf = 'Toohey''s';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询Drinkers的名字和地址：π<sub>Name,Addr</sub>(Drinkers)</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 查询结果筛选字段名的方法
SELECT Name, Addr FROM Drinkers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询Drinkers的所有信息</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 显示所有字段的方法
SELECT * FROM Drinkers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询Beers的所有品牌和制造商</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 显示结果为字段名重命名的方法
SELECT name AS Brand, manf AS Brewer FROM Beers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询各个酒吧售卖啤酒的售价，价格用Yen表示</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 修改查询结果数值，并修改显示字段名的方法
SELECT bar, beer, price*120 AS PriceInYen FROM Sells;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询喜欢Sparkling Ale啤酒的人，并修改显示结果为likes Cooper’s</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 修改查询结果显示内容的方法
SELECT drinker, 'likes Cooper''s' AS WhoLikes
FROM Likes
WHERE beer = 'Sparkling Ale';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询John喜欢的啤酒的酿酒商：π<sub>manf</sub> (σ<sub>drinker=’John′</sub> Likes ⋈ Beers)</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 多表联查的方法
SELECT Manf FROM Likes, Beers WHERE drinker = 'John' AND beer = name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询哪个酒吧的名字和啤酒的名字相同</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 解决字段名冲突的方法
SELECT Bars.name
FROM Bars, Beers
WHERE Bars.name = Beers.name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询售价大于3.00的啤酒</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 查询时指定表名的用法
SELECT Sells.beer
FROM Sells
WHERE Sells.price &gt; 3.00;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询售卖New啤酒价格与Coogee Bay酒吧售卖Victoria Bitter价格相同的酒吧</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 使用子句查询
SELECT bar
FROM Sells
WHERE beer = 'New'
	      AND price =
		(SELECT price
		  FROM Sells
		  WHERE bar = 'Coogee Bay Hotel'
		  AND beer = 'Victoria Bitter' );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 不使用子句查询
SELECT b2.bar
FROM Sells b1, Sells b2
WHERE b1.beer = 'Victoria Bitter' and b1.bar = 'Coogee Bay Hotel' and 
b1.price = b2.price and b2.beer = 'New';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询John喜欢的啤酒品牌及其制造商</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- IN的使用方法
SELECT *
FROM Beers
WHERE name IN
	       (SELECT beer
	        FROM Likes
	        WHERE drinker = 'John'
	         );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 不使用IN的查询方法
SELECT Beers.*
FROM Beers, Likes
Where Beers.name = Likes.beer and 
Likes.drinker = 'John';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询只生产一种啤酒品牌的制造商</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- EXISTS的用法
SELECT name
FROM Beers b1
WHERE NOT EXISTS
		(SELECT *
		 FROM Beers
		 WHERE manf = b1.manf
		 AND name != b1.name
		 );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询售价最高的啤酒</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- ALL的使用方法
SELECT beer
FROM Sells
WHERE price &gt;=
	    ALL(
	          SELECT price
	          FROM sells
	           );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询喜欢喝某品牌啤酒的人，同时他经常去的还售卖此种酒的酒吧</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 交集INTERSECT的用法
(SELECT *
  FROM Likes
)
	INTERSECT
(SELECT drinker,beer
  FROM Sells, Frequents
  WHERE Frequents.bar = Sells.bar
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：找到售卖Justin喜欢的所有啤酒的酒吧：π<sub>bar,beer</sub>Sells ÷ (π<sub>beer</sub>(σ<sub>drinker=′Justin′ </sub>Likes))</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 除EXCEPT的使用
select distinct a.bar
from sells a
where not exists
	( (select b.beer from likes b
	    where b.drinker = 'Justin')
	    except
	   (select c.beer from sells c
	     where c.bar = a.bar )
	  );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询New啤酒的平均售价</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 平局值AVG的用法
SELECT AVG(price)        		  
FROM Sells
WHERE beer = 'New';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询有多少酒吧售卖啤酒</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- DISTINCT的用法
SELECT COUNT(DISTINCT bar)
FROM Sells;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li>类似的聚类函数有SUM     AVG    MIN     MAX     COUNT</li>
</ul>
<h3 id="SQL-GROUP-BY"><a href="#SQL-GROUP-BY" class="headerlink" title="SQL GROUP BY"></a>SQL GROUP BY</h3><p><strong>语法</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT attributes/aggregations
FROM relations
WHERE condition
GROUP BY attribute<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询有多少种不同的啤酒</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- COUNT的使用方法
SELECT COUNT(*) FROM Beers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询每种啤酒制造商制造啤酒的数量</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- GROUP BY的用法
SELECT manf, COUNT(beer)
FROM Beers 
GROUP BY manf;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询每个人其经常去的酒吧New啤酒的平均售价</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- GROUP BY的用法二
SELECT drinker, AVG(price)
FROM Frequents, Sells
WHERE beer = 'New' AND Frequents.bar = Sells.bar
GROUP BY drinker;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询每个酒吧最便宜的啤酒价格</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- GROUP BY和MIN的用法
SELECT bar, MIN(price)
FROM Sells
GROUP BY BAR<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询郊区的啤酒平均价格，不包括Rock区的酒吧</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- GROUP BY和AVG的用法
SELECT Bars.addr, AVG(Sells.price)
FROM Sells, Bars
WHERE Bars.addr != 'The Rocks'
AND Sells.bar = Bars.name
GROUP BY Bars.addr;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-HAVING"><a href="#SQL-HAVING" class="headerlink" title="SQL HAVING"></a>SQL HAVING</h3><p><strong>语法</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT attributes/aggregations
FROM relations
WHERE condition (on tuples)
GROUP BY attribute
HAVING condition (on group);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：查询流行啤酒的均价</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- HAVING的用法
SELECT beer, AVG(price)
FROM Sells
GROUP BY beer
HAVING COUNT(bar) &gt; 1;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-CREATE-TABLE-定义表结构"><a href="#SQL-CREATE-TABLE-定义表结构" class="headerlink" title="SQL CREATE TABLE 定义表结构"></a>SQL CREATE TABLE 定义表结构</h3><p><strong>语法</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE TABLE RelName (
	attribute1 ˜ domain1 ˜ properties
	attribute2 ˜ domain2 ˜ properties
	attribute3 ˜ domain3 ˜ properties
	...
)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例：</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE TABLE Beers (
	name VARCHAR(20) PRIMARY KEY,
	manf VARCHAR(20),
);
CREATE TABLE Bars (
	name VARCHAR(30) PRIMARY KEY,
	addr VARCHAR(30),
	license INTEGER
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 定义一个主键
CREATE TABLE Beers (
	name VARCHAR(20) PRIMARY KEY,
	manf VARCHAR(20),
);
-- 定义多个主键
CREATE TABLE Beers (
	name VARCHAR(20),
	manf VARCHAR(20),
  PRIMARY KEY(name, manf)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 指定必须具有唯一值
attribute domain UNIQUE<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 定制默认值
CREATE TABLE Likes (
	drinker VARCHAR(20) DEFAULT 'Joe',
	beer VARCHAR(30) DEFAULT 'New',
	PRIMARY KEY(drinker, beer)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例：</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- NOT NULL非空约束
CREATE TABLE Likes (
	drinker VARCHAR(20) PRIMARY KEY,
	beer VARCHAR(30) NOT NULL
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例：</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- CHECK约束
CREATE TABLE Example
(
	gender CHAR(1) CHECK (gender IN ('M','F')),
	Xvalue INT NOT NULL,
	Yvalue INT CHECK (Yvalue &gt; Xvalue),
	Zvalue FLOAT CHECK (Zvalue &gt; ( SELECT MAX(price) FROM Sells))
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-INSERT-插入数据"><a href="#SQL-INSERT-插入数据" class="headerlink" title="SQL INSERT 插入数据"></a>SQL INSERT 插入数据</h3><p><strong>语法：</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 插入具体数据
INSERT INTO Relation VALUES (val1, val2, val3, ...)
-- 按查询结果插入数据
INSERT INTO Relation ( Subquery );<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 插入一条数据
INSERT INTO Likes VALUES ('Justin', 'Old');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 按指定字段顺序插入数据
INSERT INTO Sells(price,bar,beer) VALUES 
   (2.50, 'Coogee Bay Hotel', 'Pale Ale');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE TABLE DrinkingBuddies (
	name varchar(20)
);

INSERT INTO DrinkingBuddies
(
	SELECT DISTINCT f2.drinker
	FROM Frequents f1, Frequents f2
	WHERE f1.drinker = 'John'
		AND f2.drinker != 'John'
		AND f1.bar = f2.bar
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-DELETE-删除数据"><a href="#SQL-DELETE-删除数据" class="headerlink" title="SQL DELETE 删除数据"></a>SQL DELETE 删除数据</h3><p><strong>语法</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">DELETE FROM Relation
WHERE Condition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 按指定条件删除表数据
DELETE FROM Likes
WHERE drinker = 'Justin'
	AND beer = 'Sparkling Ale';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 清空表数据
DELETE FROM R;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>例</strong>：删除所有与同一制造商生产的啤酒相同的啤酒</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">DELETE FROM Beers b
WHERE EXISTS
	( SELECT name
	   FROM Beers
	   WHERE manf = b.manf
	   AND name != b.name);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-UPDTE-更新表数据"><a href="#SQL-UPDTE-更新表数据" class="headerlink" title="SQL UPDTE 更新表数据"></a>SQL UPDTE 更新表数据</h3><p><strong>语法</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">UPDATE R
SET list of assignments
WHERE Condition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 更新一条数据
UPDATE Drinkers
SET addr = 'Coogee' ,
    phone = '9665-4321'
WHERE name = 'John';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 更新多条数据
UPDATE Sells
SET price = 3.00
WHERE price &gt; 3.00;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 每种啤酒的售价提升10%
UPDATE Sells
SET price = price * 1.10;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="ALTER-TABLE-修改表结构语句"><a href="#ALTER-TABLE-修改表结构语句" class="headerlink" title="ALTER TABLE 修改表结构语句"></a>ALTER TABLE 修改表结构语句</h3><p><strong>语法</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">ALTER TABLE Relation Modifications<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 增加表字段
ALTER TABLE Bars
ADD phone char(10) DEFAULT 'Unlisted';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>例：</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 增加多个表字段
ALTER TABLE Bars 
Add opens NUMERIC(4,2) DEFAULT 10.00 ,
Add closes NUMERIC(4,2) DEFAULT 23.00 ,
Add manager VARCHAR(20)
;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-VIEWS"><a href="#SQL-VIEWS" class="headerlink" title="SQL VIEWS"></a>SQL VIEWS</h3><p><strong>语法</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 创建View
CREATE VIEW ViewName AS Query
-- 删除View
DROP VIEW ViewName<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE VIEW MyBeers AS
	SELECT name, manf
	FROM Beers
	WHERE manf = 'Carlton';
	SELECT * FROM MyBeers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE VIEW InnerCityHotels AS
	SELECT name, license
	FROM Bars
	WHERE addr = 'The Rocks' OR addr = 'Sydney';
SELECT * FROM InnerCityHotels;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE VIEW InnerCityPubs AS
	SELECT name AS pub, license AS lic
	FROM Bars
	WHERE addr IN ('The Rocks', 'Sydney');
	
CREATE VIEW InnerCityPubs(pub,lic) AS
	SELECT name, license
	FROM Bars
	WHERE addr IN ('The Rocks', 'Sydney');
	
CREATE VIEW InnerCityHotels AS
	SELECT name, license
	FROM Bars
	WHERE addr IN ('The Rocks', 'Sydney');

SELECT pub FROM InnerCityHotels WHERE lic = '123456';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>例</strong>：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">-- 通过VIEW添加数据
CREATE VIEW CityHotels AS
	SELECT name,addr FROM Bars
	WHERE addr IN ('The Rocks', 'Sydney');

INSERT INTO CityHotels
	VALUES ('Jackson''s on George', 'Sydney');

SELECT * FROM CityHotels;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL-DROP-TABLE删除表"><a href="#SQL-DROP-TABLE删除表" class="headerlink" title="SQL DROP TABLE删除表"></a>SQL DROP TABLE删除表</h3><p><strong>语法</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">DROP TABLE RelName;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="SQL的详细规则"><a href="#SQL的详细规则" class="headerlink" title="SQL的详细规则"></a>SQL的详细规则</h2><h3 id="SQL查询"><a href="#SQL查询" class="headerlink" title="SQL查询"></a>SQL查询</h3><p><strong>语法：</strong></p>
<p><strong>SELECT</strong> attributes <strong>FROM</strong> relations <strong>WHERE</strong> condition</p>
<p><strong>例：</strong>哪个啤酒是Toohey制造的？</p>
<p><strong>答：**</strong>SELECT<strong> Name </strong>FROM<strong> Beers </strong>WHERE** Manf = ‘Toohey’’s’;</p>
<p><strong>结果</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>New</td>
</tr>
<tr>
<td>Old</td>
</tr>
<tr>
<td>Red</td>
</tr>
<tr>
<td>Sheaf Stout</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注意：</strong></p>
<ul>
<li><p>字符中含有’符号时，需要双写为’’</p>
</li>
<li><p>SELECT功能可以使用关系代数中的选择（Select）、投影（Project）、连接（Join）</p>
</li>
</ul>
<h3 id="SQL标示符"><a href="#SQL标示符" class="headerlink" title="SQL标示符"></a>SQL标示符</h3><p>标示符名称用于标识对象，如表、属性、视图等</p>
<p>SQL中的标识符使用与普通编程语言类似的约定，如：</p>
<ul>
<li>必须以字母开头的字母数字序列</li>
<li>不区分大小写</li>
<li>不允使用许保留单词</li>
</ul>
<h3 id="SQL关键字"><a href="#SQL关键字" class="headerlink" title="SQL关键字"></a>SQL关键字</h3><p>SQL经常使用的关键字有：</p>
<p>ALTER    AND    CREATE<br>FROM    INSERT    NOT    OR<br>SELECT    TABLE    WHERE</p>
<p><strong>注：</strong></p>
<p>对于PostgreSQL的关键字，请参阅相关文档。</p>
<h3 id="SQL数据类型"><a href="#SQL数据类型" class="headerlink" title="SQL数据类型"></a>SQL数据类型</h3><p>SQL关系中的所有属性都指定了域</p>
<p>SQL支持一小部分有用的内置数据类型：字符串、数字、日期、位字符串</p>
<p>在PostgreSQL中允许自定义数据类型</p>
<p>各种类型的转换均可用，例如：日期到字符串，字符串到日期，整数为实数……以“使其有意义的方法”自动适应</p>
<p>自动执行基本域（类型）检查</p>
<p>约束可以用来“强制”更复杂的域成员条件</p>
<p>空值（NULL）是所有数据类型的成员</p>
<p>所有类型均可以使用比较操作符：&lt;    &gt;    &lt;=    &gt;=    =    !=</p>
<p>在WHERE表达式中可用布尔操作符AND、OR、NOT来组合比较结果</p>
<p>与NULL的比较结果为FALSE</p>
<p>可以使用以下命令显式测试NULL：</p>
<p>attr IS NULL         attr IS NOT NULL</p>
<p>大多数数据类型也有特定类型的操作可用（例如数字的算术）。实际应用哪些操作取决于实现。</p>
<h3 id="SQL字符串"><a href="#SQL字符串" class="headerlink" title="SQL字符串"></a>SQL字符串</h3><p>可以使用两种字符串：</p>
<p><strong>CHAR(n)</strong>…使用n个字节，左对齐，填充空白</p>
<p>VARCHAR(n)…使用0到n个字节，没有填充</p>
<p>字符串类型可以通过空白填充或截断来强制转换。</p>
<p>字符串字面值使用单引号写入。’John’ = “John” = “John “ != “JOHN”</p>
<p>str1 <strong>&lt;</strong> str2…使用字典顺序进行比较</p>
<p>str <strong>LIKE</strong>模式…匹配字符串到模式</p>
<p>两种模式匹配：</p>
<p><strong>%</strong>匹配任何字符（如 *）<br>_匹配任何单个字符（如 .）</p>
<p><strong>例如：</strong><br>Name <strong>LIKE</strong> ‘Ja<strong>%</strong>’            以“Ja”开头<br>Name LIKE  ‘<strong>_</strong>i<strong>%</strong>’            名称以“i”作为第二个字母<br>Name <strong>LIKE</strong> ‘%o<strong>%</strong>o<strong>%</strong>’     名称包含两个“o”</p>
<h3 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h3><p>string <strong>||</strong> string … 连接两个字符串</p>
<p><strong>例如：</strong>‘Post’|| ‘greSQL’ -&gt; PostgreSQL</p>
<p><strong>LENGTH</strong>(str) … 返回字符串长度</p>
<p><strong>SUBSTR</strong> (str,开始,长度)……从字符串中提取字符</p>
<p><strong>substring</strong>(‘Thomas’, 2, 3) -&gt; hom</p>
<h3 id="SQL日期"><a href="#SQL日期" class="headerlink" title="SQL日期"></a>SQL日期</h3><p>日期只是特殊格式的字符串，通过一系列操作来实现日期语义。</p>
<p>经典的格式为 DD-Mon-YYYY，如：’18-Aug-1998’</p>
<p>接受其他格式</p>
<p>可使用比较运算符&lt;和&gt;进行比较</p>
<p>(start1, end1) <strong>OVERLAPS</strong> (start2, end2)</p>
<p>如果第一段日期与第二段日期有重叠，则返回True，否则返回False</p>
<p><strong>例如：</strong></p>
<p><strong>SELECT</strong> (DATE ‘2001-02-16’, DATE ‘2001-12-21’) <strong>OVERLAPS</strong> (DATE ‘2001-10-30’, DATE ‘2002-10-30’);  -&gt; 结果: True</p>
<h3 id="SQL数字"><a href="#SQL数字" class="headerlink" title="SQL数字"></a>SQL数字</h3><p>可以使用各种类型的数字：<br>smallint, int, bigint…2字节，4字节和8字节的整数<br>real, double precision…4字节8字节的浮点数<br>numeric(precision, scale)<br>scale是小数点右侧的小数部分的数。precision是整个数字中所有有效数字的总数</p>
<p>算数运算符：+  - * / abs ceil floor power sqrt sin …</p>
<p>一些运算适用于关系中的一列数字：</p>
<p>AVG (attr)…            属性值的平均值<br>COUNT(attr)…        属性列的行数<br>MIN/MAX(attr)…    最小/最大的attr值<br>SUM(attr)…            attr的值的总和</p>
<p>NULL 在算术操作生成结果为NULL，但参与列操作时被忽略</p>
<h3 id="SQL元组和集合"><a href="#SQL元组和集合" class="headerlink" title="SQL元组和集合"></a>SQL元组和集合</h3><p>Tuple和set常量都写成(val1, val2, val3, … )</p>
<p>正确的解释是从上下文中得出的</p>
<p><strong>例如：</strong></p>
<p>Tuple含义：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">Student(stude#, name, course)
( 2177364, ’Jack Smith’, ’BSc’)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Set含义</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT name
FROM Employees
WHERE job IN (’Lecturer’, ’Tutor’, ’Professor’);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="查询单个关系"><a href="#查询单个关系" class="headerlink" title="查询单个关系"></a>查询单个关系</h3><p>格式（关系代数）：</p>
<p>从关系R FROM子句</p>
<p>在 WHERE 子句中使用 Condition 实现 σ </p>
<p>在 SELECT 子句中使用 Attributes 实现 π </p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT Attributes
FROM R
WHERE Conditions<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>从操作上来说，我们考虑的是一个元组变量，其范围涵盖了关系的所有元组。</p>
<p>操作的语义：</p>
<pre class="line-numbers language-none"><code class="language-none">FOR EACH tuple T in R DO
	check whether T satisfies the condition in the WHERE clause
	IF it does THEN
		print the attributes of T that are
		specified in the SELECT clause
	END
END<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="SQL投影"><a href="#SQL投影" class="headerlink" title="SQL投影"></a>SQL投影</h3><p>假设一个关系R和属性 X ⊆ R.</p>
<p>π<sub>X</sub> (R) 在SQL中实现如下:</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT X FROM R<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>例子：</strong></p>
<p>投影drinkers的名字：π<sub>Name</sub>(Drinkers)</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT Name FROM Drinkers;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>结果为：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
</tr>
<tr>
<td>Gernot</td>
</tr>
<tr>
<td>John</td>
</tr>
<tr>
<td>Justin</td>
</tr>
</tbody>
</table>
</div>
<p><strong>例子：</strong></p>
<p>drinkers的名字和地址 π<sub>Name,Addr</sub>(Drinkers)</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT Name, Addr FROM Drinkers;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果为：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>NAME</th>
<th>ADDR</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
<td>Randwick</td>
</tr>
<tr>
<td>Gernot</td>
<td>Newtown</td>
</tr>
<tr>
<td>John</td>
<td>Clovelly</td>
</tr>
<tr>
<td>Justin</td>
<td>Mosman</td>
</tr>
</tbody>
</table>
</div>
<p>符号∗表示所有属性的列表。</p>
<p>例如：</p>
<p>drinkers的所有信息：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT * FROM Drinkers;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ame</th>
<th>Addr</th>
<th>Phone</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adam</td>
<td>Randwick</td>
<td>9385-4444</td>
</tr>
<tr>
<td>Gernot</td>
<td>Newtown</td>
<td>9415-3378</td>
</tr>
<tr>
<td>John</td>
<td>Clovelly</td>
<td>9665-1234</td>
</tr>
<tr>
<td>Justin</td>
<td>Mosman</td>
<td>9845-4321</td>
</tr>
</tbody>
</table>
</div>
<h3 id="SQL选择"><a href="#SQL选择" class="headerlink" title="SQL选择"></a>SQL选择</h3><p>σ<bar>Cond</bar>(Rel) 在SQL中实现如下:</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT * FROM Rel WHERE Cond<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>例如：找出Regent Hotel对新产品的价格</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT price
FROM Sells
WHERE bar = ’Regent Hotel’ AND beer = ’New’;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>结果：<br>| PRICE |<br>| ——- |<br>| 22    |</p>
<p>条件可以是任意复杂的布尔值表达式，使用前面提到的操作符。</p>
<p>典型的SELECT查询格式为：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT a1, a2, a3
FROM Rel
WHERE Cond<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这对应于select后面跟着project：</p>
<p>π<sub>{a1,a2,a3}</sub>(σ<sub>Cond</sub>(Rel))</p>
<h3 id="使用AS重命名"><a href="#使用AS重命名" class="headerlink" title="使用AS重命名"></a>使用AS重命名</h3><p>Ullman/Widom定义了一个重命名操作符ρ，以避免名称冲突。</p>
<p>例如，“学术”和“学生”的地址栏</p>
<p>例子：ρ<sub>Beers(Brand,Brewer)</sub>(Beers)</p>
<p>给出一个新的关系，使用与Beers相同的数据，但是属性名称改变了。</p>
<p>SQL提供AS来解决这个问题，它用于SELECT部分。</p>
<p><strong>例子</strong></p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT name AS Brand, manf AS Brewer FROM Beers;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果：<br>| BRAND| BREWER|<br>| ————————————-| ——————————|<br>| 80/- | Caledonian|<br>| Bigfoot Barley Wine| Sierra Nevada|<br>| Burragorang Bock | George IV Inn|<br>| Crown Lager| Carlton|<br>| Fosters Lager | Carlton|<br>| Invalid Stout| Carlton|</p>
<h3 id="表达式作为列中的值"><a href="#表达式作为列中的值" class="headerlink" title="表达式作为列中的值"></a>表达式作为列中的值</h3><p>AS还可以用于引入计算值</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT bar, beer, price*120 AS PriceInYen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>BAR</th>
<th>BEER</th>
<th>PRICEINYEN</th>
</tr>
</thead>
<tbody>
<tr>
<td>Australia Hotel</td>
<td>Burragorang Bock</td>
<td>420</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>New</td>
<td>270</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Old</td>
<td>300</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Sparkling Ale</td>
<td>336</td>
</tr>
<tr>
<td>Coogee Bay Hotel</td>
<td>Victoria Bitter</td>
<td>276</td>
</tr>
</tbody>
</table>
</div>
<p>这只是显示数据库数据，但没有对数据库进行更改</p>
<h3 id="在结果表中插入文本"><a href="#在结果表中插入文本" class="headerlink" title="在结果表中插入文本"></a>在结果表中插入文本</h3><p>技巧：要将文本放入输出列，请使用带有AS的常量表达式。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT drinker, ‘likes Cooper’’s’ AS WhoLikes
FROM Likes
WHERE beer = ‘Sparkling Ale’;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>结果：<br>|DRINKER|WHOLIKES|<br>|———————|———————|<br>|Gernot|likes Cooper’s|<br>|Justin |likes Cooper’s|</p>
<h3 id="查询多关系"><a href="#查询多关系" class="headerlink" title="查询多关系"></a>查询多关系</h3><p>找到约翰喜欢的啤酒酿造商。</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT Manf FROM Likes, Beers WHERE drinker = ‘John’ AND beer = name;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果：<br>| MANF|<br>|——————————|<br>|Caledonian|<br>|Sierra Nevada|<br>|Sierra Nevada|<br>|Lord Nelson|</p>
<p>注意：可以使用DISTINCT来消除重复项。</p>
<p>关系代数：π<sub>manf</sub> (σ<sub>drinker=‘John′</sub> Likes ⋈ Beers).</p>
<p>语法：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT Attributes
FROM R1, R2, ...
WHERE Condition
FROM clause contains a list of relations.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>SQL SELECT语句的几个关系：</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT Attributes
FROM R1, R2, ...
WHERE Condition<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>形式语义（关系代数）：</p>
<p>从乘积R1 × R2 ×…在FROM子句<br>应用σ使用条件在WHERE子句<br>应用π使用属性在SELECT子句</p>
<p>SELECT的操作语义:</p>
<pre class="line-numbers language-none"><code class="language-none">FOR EACH tuple T1 in R1 DO
	FOR EACH tuple T2 in R2 DO
	    ...
	         check WHERE condition for current
	         assignment of T1, T2, ... vars
	         IF holds THEN
		print attributes of T1, T2, ...
		specified in SELECT	END
	          END
	     ...

END<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>由于效率的原因，它不以这种方式实现！</p>
<h3 id="属性名称冲突"><a href="#属性名称冲突" class="headerlink" title="属性名称冲突"></a>属性名称冲突</h3><p>如果选择条件引用两个关系，或关系具有相同名称的属性，则可以使用关系名称来消除歧义。</p>
<p><strong>例子：</strong></p>
<p>哪些酒店的名字和啤酒相同?</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT Bars.name
FROM Bars, Beers
WHERE Bars.name = Beers.name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<p>它们都没有，所以结果是空的。</p>
<p>可以使用这样的限定名，即使没有歧义:</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">SELECT Sells.beer
FROM Sells
WHERE Sells.price &gt; 3.00;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>建议:<br>只有在绝对必要时才对属性名进行限定。不能使用SQL的AS操作符来解析名称冲突。</p>
<h3 id="表名称冲突"><a href="#表名称冲突" class="headerlink" title="表名称冲突"></a>表名称冲突</h3><p>如果我们在SELECT中使用同一个关系两次，那么relationship-dot-attribute约定将不起作用。</p>
<p>要处理这个问题，我们需要在FROM子句中为关系的每个“实例”定义新的名称。</p>
<p>举例：找几双同一厂商生产的啤酒。</p>
<p>注意：我们应该避免：<br>将啤酒与自身搭配如(New,New)<br>相同的配对如 (New,Old) (Old,New)</p>
<pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">SELECT b1.name, b2.name FROM Beers b1, Beers b2 WHERE b1.manf = b2.manf AND b1.name &lt; b2.name;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>SELECT-FROM-WHERE查询的结果可以在另一个查询的WHERE子句中使用。</p>
<p>最简单的例子:子查询返回一个元组。可以将结果视为常数值并使用=。</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://szdf123.github.io/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/" title="数据库基础SQL" target="_blank" rel="external">http://szdf123.github.io/2021/03/01/unsw/comp9311/shu-ju-ku-ji-chu-sql/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://szdf123.github.io/" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://szdf123.github.io/" target="_blank"><span class="text-dark">本杰明</span><small class="ml-1x">Programmer &amp; Product Manager</small></a></h3>
        <div>学习技术，热爱生活</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/01/ji-zhu-xue-xi/ji-suan-ji-ji-zhu-ying-yu-sheng-ci-ben/" title="计算机技术英语生词本"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/28/unsw/comp9311/shu-ju-ku-ji-chu-ke-cheng-bi-ji-3/" title="数据库基础课程笔记（3）"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/szdf123" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2021 Benjamin
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   






<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>
</html>